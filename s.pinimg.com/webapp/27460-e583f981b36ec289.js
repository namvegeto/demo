"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[27460],{857916:function(e,t,n){n.d(t,{Di:function(){return _},Jl:function(){return u},R:function(){return l},ZP:function(){return h},aU:function(){return d},j2:function(){return p},pN:function(){return m},rL:function(){return v},vW:function(){return f}});var r=n(684404),a=n(205841),o=n(454514),i=n(339001),s=n(624797),c=n(819267),u=7e3,l="permanent_account_closure",p="account_deletion_email_sent",_="account_deactivated",d="unlink_successful",m="account_switch_to_settings";function g(e,t,n){return(0,c.jsx)(r.xv,{align:n||"center",children:(0,i.nk)(e,{username:(0,c.jsx)(r.xv,{inline:!0,weight:"bold",children:t})})})}function f(e){var t=e.i18n,n=e.message,r=e.multipleAccounts,a=e.username,o=void 0===a?"":a;switch(n){case l:return t._('Your account has been deleted. We\'re sad to see you go', 'unauthLoginPage.accountDeletedToast.message', 'Confirmation message after a user has successfully deleted their account');case p:if(r)return g(t._('An email has been sent with final steps to delete your account, {{username}} and its linked accounts', 'accountDeletedEmailToast.message.multipleAccounts', 'Confirmation message after a user has successfully requested multiple accounts deletion'),o);return g(t._('An email has been sent with final steps to delete your account, {{username}}', 'accountDeletedEmailToast.message.singleAccount', 'Confirmation message after a user has successfully requested a single account deletion'),o);case _:return g(r?t._('The account, {{username}}, and its associated linked accounts have been deactivated', 'unauthLoginPage.deactivatedToast.message.multipleAccounts', 'Confirmation message after a user has successfully deactivated multiple accounts'):t._('The account, {{username}}, has been deactivated', 'unauthLoginPage.deactivatedToast.message.singleAccount', 'Confirmation message after a user has successfully deactivated a single account'),o);case d:return g(t._('Success! You\'ve unlinked this business account. You are currently in {{username}}.', 'authHomeFeedPage.unlinkAccountToast.message', 'Confirmation message after a user has successfully unlinked business account'),o,"start");case m:return g(t._('You\'ve switched into and are currently in the account {{username}}', 'accountSettings.switchAccountToAccountChanges', 'Confirmation message after a user has successfully switched accounts and got redirected to Account Changes'),o,"start");default:return""}}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(t&&t.search))return"";var r=(0,s.mB)(t.search).message,a=(0,s.mB)(t.search).username||n;return f({i18n:e,message:r,multipleAccounts:"true"===(0,s.mB)(t.search).multiple_accounts,username:a})}function v(e){var t=e.showOneToast,n=e.i18n,r=e.location,i=e.history,l=e.username,p=e.fullName,_=e.avatarUrl;if(r&&r.search){var g=h(n,r,l||""),f=(0,s.mB)(r.search).message,v=f===m||f===d;g&&(t(function(e){var t=e.hideToast;return(0,c.jsx)(o.ZP,{duration:u,onHide:t,text:g,thumbnail:v?{avatar:(0,c.jsx)(a.qE,{name:p||"",size:"md",src:_||""})}:void 0})}),i.replace(r.hash?"".concat(r.pathname).concat(r.hash):r.pathname))}}},758939:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(729817),a=n(217058);function o(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return s.apply(this,arguments)}function s(){var e;return e=regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.Kw)();case 2:o=(n=e.sent)?{user_ids:Object.keys(n)}:{},(0,a.tj)("mweb_multiple_accounts_".concat(t),o);case 5:case"end":return e.stop()}},e)}),(s=function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)})}).apply(this,arguments)}},373236:function(e,t,n){n.d(t,{eN:function(){return u},_:function(){return p},kB:function(){return l}});var r=n(702497),a=n(624797),o=n(328038),i=["/resource/:name/:method/","/resource/commerce/:name/:method/","/:username/pins/follow/","/email/remove/","/about/trademark/:claim_type/","/about/copyright/dmca-pin/web-result/:id/","/about/copyright/dmca-pin/pin/:id/","/about/copyright/dmca-pin/","/about/koplg/","/about/:lawName/","/about/radtc/","/website/confirm/","/oauth/","/app-factory-oauth/","/settings/extension/uninstall/","/offsite/","/amp/(.*)"],s=function(e,t){var n=new URL(e,t);return i.some(function(e){return!!(0,o.LX)(n.pathname,{path:e,exact:!0})})},c=n(953565),u=function(e){return e&&(0,a.Qg)(e)&&r.lfe!==e?(0,a.Qc)(e).relative:"/"},l=function(e,t){var n=(0,a.Jx)(e);return s(n,t)||(0,a.OM)(n)===a.vx.TRUSTED_DIFFERENT_ORIGIN},p=function(e){var t=e.forceFullPageNavigation,n=e.history,r=e.next,o=e.noLocationReplace,i=e.origin,s=(0,a.Jx)(r);l(r,i)||!n||t?(t&&(0,c.nP)("webapp.duplo.navigateOnLogin.forceFullPageNavigation",{sampleRate:1}),window.location.assign(s)):o?n.push(u(s)):n.replace(u(s))}},27460:function(e,t,n){n.d(t,{f:function(){return N},l:function(){return F}});var r=n(672652),a=n(780277),o=n(216167),i=n(224796),s=n(587703),c=n(658583),u=n(622541),l=n(305657),p=n(957753),_=n(820428),d=n(857916),m=n(508218),g=n(340523),f=n(182962),h=n(891276),v=n(5859),y=n(666698),b=n(731714),w=n(191313),A=n(217058),P=n(722363),x=n(407053),k=n(758939),O=n(373236),T=n(546689),E=n(844998),D=n(953565);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){var r,a;r=t,a=n[t],(r=function(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==R(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,a)}var L=function(e){return{type:"AUTHENTICATE_USER",payload:{user:e}}},N=function(){var e,t,n=(0,s.Z)(),R=(0,g.F)(),S=(0,a.useDispatch)(),N=(0,v.B)(),F=N.country,z=N.countryFromHostName,Z=N.countryFromIp,I=N.regionFromIp,U=N.userAgent,B=U.isTablet,H=U.isMobile,Y=(0,f.Z)(),X=(0,P.Z)();return(0,r.useCallback)((e=regeneratorRuntime.mark(function e(t,r){var a,s,g,f,v,P,C,N,U,q,J,M,V,K,W,Q,G,$,ee,et,en,er,ea,eo,ei,es=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=es.length>2&&void 0!==es[2]?es[2]:"/",s=es.length>3&&void 0!==es[3]?es[3]:{isAutologin:!1,isSwitchAccount:!1,noLocationReplace:!1,recaptchaV3Token:"default",noImmediateRedirect:!1,useAlternativeResourceCall:!1,trigger:"other",accountUnlinked:!1},g=es.length>4?es[4]:void 0,Y(),f=!B&&!H,v=s.isAutologin,P=s.isSwitchAccount,C=s.noLocationReplace,N=s.recaptchaV3Token,U=s.noImmediateRedirect,q=s.useAlternativeResourceCall,J=s.trigger,M=s.accountUnlinked,b.Z.setItem(i.V6,(0,m.nY)(t)),V=function(e){var t;n(j(j({},g),{},{event_type:e,aux_data:j(j({},g.aux_data),{},{upsell_reason:(null===(t=g.aux_data)||void 0===t?void 0:t.upsell_reason)||(v?"autologin":b.Z.getItem(i.bg)||null),upsell_view_count:b.Z.getItem(i.w0)||0})})),7536===e&&b.Z.setItem(i.w0,0)},K=j(j({get_user:!0},t),{},{app_type_from_client:6,recaptchaV3Token:N}),(W=(0,T.t_)())&&(K=j(j({},K),{},{visited_pages_before_login:W})),(Q=(0,T.OJ)())&&(K=j(j({},K),{},{referrer:Q})),G=o.Z.create("UserSessionResource",K).callCreate(),q&&t.username_or_email&&t.password&&(($=new FormData).append("username",t.username_or_email),$.append("password",t.password),ee={method:"POST",body:$,credentials:"include",headers:{Accept:"application/json, text/javascript, */*","X-CSRFToken":(0,l.getCsrfToken)()||"","X-Requested-With":"XMLHttpRequest"}},G=fetch("/resource/UserSessionResource/create/",ee).then(function(e){if(200!==e.status)throw Error(e.statusText);return e.json()}).catch(function(e){return Promise.reject(e)})),e.prev=15,v?(0,A.dy)({event:"login_api_call_start",provider:t.google_open_id_token?"google":"facebook"}):(0,A.EX)({event:"login_api_call_start",provider:(0,m.nY)(t)}),V(7534),X({action:v?"autologin":"login",event:"attempt",type:(0,m.lp)(t),trigger:J}),e.next=21,G;case 21:et=e.sent,v?(0,A.dy)({event:"login_api_call_success",provider:t.google_open_id_token?"google":"facebook"}):(0,A.EX)({event:"login_api_call_success",provider:(0,m.nY)(t)}),S(L(et.resource_response.data.user)),en=et.client_context,(er=et.resource_response.data.user.gatekeeper_experiments)?(ea=er.active,eo=er.triggerable,ea&&eo||(0,D.nP)("webapp.authentication.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!ea),triggerable:String(!!eo)}}),R.updateExperiments(ea,eo)):(0,D.nP)("webapp.authentication.updateExperimentsFailed"),en&&en.placed_experiences&&S((0,p.OD)(en.placed_experiences)),(0,k.Z)("authentication.login_success"),m.ZP.storeLoginCredentialsToBrowser(t),V(7536),X({action:v?"autologin":"login",event:"success",type:(0,m.lp)(t),trigger:J}),(0,_.Z)(),c.zN(u.e7.name),c.zN(u.x3.name),(0,w.Nh)(x.AA,1),"/"!==a&&(0,E.E)(!0),P?(0,y.Dm)().then(function(){var e,t="/".concat((null===(e=et.resource_response.data)||void 0===e?void 0:e.user.username)||"")+(M?"?message=".concat(d.aU):"");window.location.href=t}):v&&!f||U||(0,O._)({forceFullPageNavigation:f,history:r,next:a,noLocationReplace:C,origin:window.location}),(0,h.ko)({country:F,countryFromHostName:z,countryFromIp:Z,regionFromIp:I,deviceType:"Mobile",eventCategory:"Logins"}),e.next=52;break;case 41:if(e.prev=41,e.t0=e.catch(15),v?(0,A.dy)({event:"login_api_call_failure",provider:t.google_open_id_token?"google":"facebook"}):(0,A.EX)({event:"login_api_call_failure",provider:(0,m.nY)(t)}),!(1201===e.t0.api_error_code&&!v&&!f)){e.next=48;break}r&&(ei={creds:t,next:a,phoneNumber:e.t0.data.phone_number_end},r.push({pathname:"/login/mfa/",state:ei})),e.next=52;break;case 48:throw V(7535),X({action:v?"autologin":"login",event:"fail",type:(0,m.lp)(t),trigger:J}),P&&(0,k.Z)("authentication.login_error"),e.t0;case 52:case"end":return e.stop()}},e,null,[[15,41]])}),t=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,s,"next",e)}function s(e){C(o,r,a,i,s,"throw",e)}i(void 0)})},function(e,n){return t.apply(this,arguments)}),[S,F,z,Z,Y,R,H,B,n,I,X])},F=function(){var e=(0,g.F)(),t=(0,a.useDispatch)(),n=(0,f.Z)();return function(r){var a=r.client_context,o=r.resource_response.data;o&&(n(),t(L(o.user)));var i=o.user.gatekeeper_experiments;if(i){var s=i.active,c=i.triggerable;s&&c||(0,D.nP)("webapp.crossDomainAutologin.emptyExperimentsDebug",{sampleRate:1,tags:{active:String(!!s),triggerable:String(!!c)}}),e.updateExperiments(s,c)}else(0,D.nP)("webapp.crossDomainAutologin.updateExperimentsFailed");a&&t((0,p.OD)(a.placed_experiences))}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/27460-e583f981b36ec289.js.map