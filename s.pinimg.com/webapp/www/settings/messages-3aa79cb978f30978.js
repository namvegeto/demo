(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3961],{892325:function(e,s,i){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/settings/messages"]=function(){return i(6981).Z}},296792:function(e,s,i){"use strict";var n=i(672652),t=i(684404),o=i(819267),r=(0,n.forwardRef)(function(e,s){var i=e.heading,n=e.iconAccessibilityLabel,r=e.headingAccessibilityLevel,l=e.description,a=e.onTap,c=e.primarySettingsMenu;return(0,o.jsx)(t.iP,{onTap:void 0===a?function(){}:a,tapStyle:"none",children:(0,o.jsx)(t.xu,{padding:c?2:0,children:(0,o.jsxs)(t.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,o.jsxs)(t.xu,{ref:s,children:[(0,o.jsx)(t.X6,{accessibilityLevel:void 0===r?3:r,size:"400",children:i}),l&&(0,o.jsx)(t.xu,{marginTop:2,children:(0,o.jsx)(t.xv,{color:"subtle",children:l})})]}),(0,o.jsx)(t.xu,{paddingY:1,children:(0,o.jsx)(t.JO,{accessibilityLabel:n,color:c?"subtle":"default",icon:"arrow-forward"})})]})})})});s.Z=r},927218:function(e,s,i){"use strict";var n=i(684404),t=i(819267);s.Z=function(e){var s=e.heading,i=e.description,o=e.switchId,r=e.onChange,l=e.switched,a=e.headingAccessibilityLevel;return(0,t.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,t.jsx)(n.xu,{flex:"grow",marginEnd:4,children:(0,t.jsxs)(n.__,{htmlFor:o,children:[(0,t.jsx)(n.X6,{accessibilityLevel:a||3,size:"400",children:s}),i?(0,t.jsx)(n.xu,{flex:"grow",marginTop:2,children:(0,t.jsx)(n.xv,{color:"subtle",children:i})}):null]})}),(0,t.jsx)(n.rs,{id:o,onChange:r,switched:l})]})}},6981:function(e,s,i){"use strict";i.d(s,{Z:function(){return S}});var n=i(672652),t=i(780277),o=i(328038),r=i(684404),l=i(454514),a=i(140017),c=i(165706),d=i(179425),g=i(340523),u=i(995917),_=i(975048),h=i(296792),m=i(13848),f=i(554786),p=i(149722),b=i(19434),x=i(623281),v=i(880093),A=i(927218),P=i(819267);function j(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,t,o,r,l=[],a=!0,c=!1;try{if(o=(i=i.call(e)).next,0===s){if(Object(i)!==i)return;a=!1}else for(;!(a=(n=o.call(i)).done)&&(l.push(n.value),l.length!==s);a=!0);}catch(e){c=!0,t=e}finally{try{if(!a&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(c)throw t}}return l}}(e,s)||function(e,s){if(e){if("string"==typeof e)return y(e,s);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(e,s)}}(e,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,s){(null==s||s>e.length)&&(s=e.length);for(var i=0,n=Array(s);i<s;i++)n[i]=e[i];return n}var S=function(){var e,s,i,y=(0,t.useDispatch)(),S=(0,o.k6)(),w=(0,a.ZP)(),z=(0,f.HG)(),L=(0,p.Z)(),I=(0,m.F9)().showToast,E=(0,g.F)().checkExperiment,C=(0,u.Z)({name:"UserSettingsResource",noCache:!0}),D=C.data,T=C.isLoaded,M=j((0,n.useState)(null===(s=L.partner)||void 0===s?void 0:s.enable_profile_message),2),k=M[0],O=M[1],H=j((0,n.useState)([]),2),B=H[0],N=H[1],Z=j((0,n.useState)([]),2),F=Z[0],U=Z[1],X=E("messaging_permissions_update").anyEnabled;(0,n.useEffect)(function(){var e,s=(null==D?void 0:D.messaging_permissions)||[];if(T&&s.length>0){var i=[],n=[];s.forEach(function(e){return e.eligible_levels.length>1?i.push(e):n.push(e)}),N(i),U(n)}O(null==D?void 0:null===(e=D.partner)||void 0===e?void 0:e.enable_profile_message)},[null==D?void 0:D.messaging_permissions,null==D?void 0:null===(i=D.partner)||void 0===i?void 0:i.enable_profile_message,T]);var G=function(e){var s=e.groupId,i=e.selectedLevelId,n=X?(0,v.Pp)({groupId:s,i18n:w}):(0,v.CE)({groupId:s,i18n:w}),t=(0,v.m8)({levelId:i,i18n:w});return n&&t&&(0,P.jsx)(r.xu,{"data-test-id":"".concat(n.route,"-message-setting"),marginBottom:6,children:(0,P.jsx)(h.Z,{description:t.label,heading:n.title,headingAccessibilityLevel:2,iconAccessibilityLabel:w._('Go to Edit title', 'profile.SocialPermissions.Messages.Icon', 'Edit Messages Icon on Social Permissions Page'),onTap:function(){n.route&&S.push("/settings/messages/".concat(n.route))}})},s)},R=function(e){var s=e.groupId,i=X?(0,v.Pp)({groupId:s,i18n:w}):(0,v.CE)({groupId:s,i18n:w});return i&&(0,P.jsxs)(r.xu,{"data-test-id":"".concat(i.route,"-message-setting"),marginBottom:6,children:[(0,P.jsx)(r.X6,{accessibilityLevel:2,size:"400",children:i.title}),(0,P.jsx)(r.xu,{marginTop:2,children:(0,P.jsx)(r.xv,{color:"subtle",children:i.nonEditableSubtitle||""})})]},s)},K=B.length>0||F.length>0,W=L.partner?!!k&&K:K;if(!L.isAuth)return(0,P.jsx)(o.l_,{to:v.NN});if(z)return(0,P.jsx)(o.l_,{to:v.ic});if(!T)return(0,P.jsx)(r.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,P.jsx)(r.$j,{accessibilityLabel:w._('Loading messaging permissions edit page', 'userSettingsPage.socialPermissions.MessagingPermissions.loading', 'Loading state for the edit messaging permissions page'),show:!0})});var Y=X?w._('You decide whether messages go to your inbox, requests, or if you don\u2019t receive them at all', 'userSettingsPage.SocialPermissions.MessagingPermissions.description', 'Description for the edit messaging permissions page'):w._('Choose who can send you messages', 'userSettingsPage.SocialPermissions.MessagingPermissions.description.deprecated', 'Deprecated description for the edit messaging permissions page');return(0,P.jsxs)(d.default,{hasFixedHeader:!0,children:[(0,P.jsx)(c.FixedHeader,{zIndexForGestaltBug:2,children:(0,P.jsx)(b.default,{heading:w._('Messages', 'userSettingsPage.socialPermissions.MessagingPermissions.title', 'Page for the edit messaging permissions settings'),legoSettingsEnabled:!0,previousUrl:"/settings/permissions"})}),(0,P.jsxs)(r.xu,{"data-test-id":"settings-messages",marginBottom:2,paddingX:2,children:[(0,P.jsx)(r.xu,{marginBottom:6,marginTop:1,children:(0,P.jsx)(r.xv,{align:"start",size:"300",children:Y})}),L.partner&&(0,P.jsx)(r.xu,{marginBottom:6,children:(0,P.jsx)(A.Z,{description:(e=w._('A message button will appear on your profile so others can message you.', 'profile.Messages.description', 'Settings toggle for enabling messages receival on bussines profile'),k&&(e+=" "+(w._('Change how you receive messages below.', 'settings.messagingPermissions.businessSetting.description.enabled', 'Additional line for business message setting when setting is enabled'))),e),heading:w._('Allow others to message my business', 'profile.Messages.title', 'Settings toggle for enabling messages receival on bussines profile'),headingAccessibilityLevel:2,onChange:function(){var e,s=!k;O(s),y((0,x._L)({field:"enable_profile_message",value:s,onSettingSavedHn:function(){I(function(e){var s=e.hideToast;return(0,P.jsx)(l.ZP,{duration:v.hN,onHide:s,text:w._('Message settings saved', 'profile.SocialPermissions.Messages.ToastMessage', 'Name of setting being saved for confirmation toast')})})},showErrorHn:function(){},surfaceTag:_.i.SETTINGS,userId:null!==(e=L.id)&&void 0!==e?e:""}))},switched:!!k,switchId:"partner-messages-switch"})}),W&&(0,P.jsxs)(n.Fragment,{children:[B.map(function(e){return G({groupId:e.group_id,selectedLevelId:e.selected_level})}),F.map(function(e){return R({groupId:e.group_id})}),(0,P.jsxs)(r.xu,{"data-test-id":"blocked-accounts-message-setting",marginBottom:6,children:[(0,P.jsx)(r.X6,{accessibilityLevel:2,size:"400",children:w._('Blocked accounts', 'settings.messagingPermissions.blockedAccounts.subHeader', 'Subheader for note on blocked accounts behavior for messaging permissions')}),(0,P.jsx)(r.xu,{marginTop:2,children:(0,P.jsx)(r.xv,{color:"subtle",children:w._('Note: Accounts you\'ve blocked on Pinterest can\'t message you. To unblock an account, go to their profile.', 'settings.messagingPermissions.blockedAccounts.description', 'Description for blocked accounts behavior for messaging permissions')})})]})]})]})]})}}},function(e){e.O(0,[97270,84404,28038,24797,55169,64283,56418,80829],function(){return e(e.s=892325)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/settings/messages-3aa79cb978f30978.js.map