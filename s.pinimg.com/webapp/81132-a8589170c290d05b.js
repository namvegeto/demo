"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[81132],{381132:function(e,t,n){var r=n(672652),a=n(581389),i=n(214877),o=n(140017),l=n(763865),s=n(6845),c=n(819267);function u(e){if(e){var t=e.letter_spacing,n=e.line_height,r=e.name,a=e.url;return(0,s.h)([(0,l.d3)({letterSpacing:t,lineHeight:n,name:r,url:a})],(null!=r?r:"").split(" ").join(""))}}t.Z=(0,r.forwardRef)(function(e,t){var n=e.pinRepWidth,l=1.5*n,s=l/2,f=(0,o.ZP)(),d=(0,i.v)().logContextEvent,h=(0,r.useRef)(null),_=function(){return h.current.toDataURL()};return(0,r.useImperativeHandle)(t,function(){return{exportCanvasBase64:_}}),(0,r.useEffect)(function(){d({event_type:13,view_type:e.viewType,component:14278})}),(0,r.useEffect)(function(){var t=e.productPinImgUrl,r=e.logoUrl,i=h.current.getContext("2d"),o=function(e){var t=new Image;return t.crossOrigin="anonymous",e&&(t.src=e),t},c=o(t);c.alt="product";var d=o(r),_=function(e){switch(e){case"BEAUTY":return f._('Shop the look for a more beautiful you.', 'ads_template.text.biz_vertical.beauty', 'Ads template tagline for merchants in beauty business vertical');case"FASHION":return f._('Slip into a wardrobe made just for you.', 'ads_template.text.biz_vertical.fashion', 'Ads template tagline for merchants in fashion business vertical');case"HOME":return f._('You\u2019ll never want to leave home.', 'ads_template.text.biz_vertical.home', 'Ads template tagline for merchants in home business vertical');case"TRAVEL":return f._('Plan your next dream getaway.', 'ads_template.text.biz_vertical.travel', 'Ads template tagline for merchants in travel business vertical');case"FOOD_AND_DRINK":return f._('Call me chef.', 'ads_template.text.biz_vertical.food_and_drink', 'Ads template tagline for merchants in food and drink business vertical');case"DIY_AND_CRAFT":return f._('Make your next masterpiece.', 'ads_template.text.biz_vertical.diy_and_craft', 'Ads template tagline for merchants in DIY and craft business vertical');case"HEALTH_AND_FITNESS":return f._('Be the best version of you.', 'ads_template.text.biz_vertical.health_and_fitness', 'Ads template tagline for merchants in health and fitness business vertical');case"EDUCATION":return f._('You can learn anything.', 'ads_template.text.biz_vertical.education', 'Ads template tagline for merchants in education business vertical');case"DESIGN_AND_ART":return f._('Unleash your creativity.', 'ads_template.text.biz_vertical.design_and_art', 'Ads template tagline for merchants in design and art business vertical');case"EVENTS":return f._('Create an unforgettable experience.', 'ads_template.text.biz_vertical.events', 'Ads template tagline for merchants in events business vertical');default:return f._('Selected products just for you.', 'ads_template.text.biz_vertical.other', 'Ads template tagline for merchants in other business vertical')}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"plain",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=_(e.businessVertical);return"theme"===t?(0,a.lD)(n,i,r,5):(0,a.lD)(n,i,r,3)},p=function(){var t=e.businessGoals;return t&&t.includes("SELL_PRODUCTS")?f._('Shop now', 'ads_template.cta_text.biz_goals.sell_products', 'Ads template call to action text'):f._('Learn more', 'ads_template.cta_text.default', 'Ads template call to action text')},g=function(e,t){if(t/e>=1.5){var r=t*(n/e),a=l/2-r/2;i.drawImage(c,0,0,e,e*r/n,0,a,n,r)}else{var o=e*(l/t),s=n/2-o/2;i.drawImage(c,0,0,e,t,s,0,o,l)}},v=function(e,t,r){var a=function(e){return{x:r.x*e,y:r.y*e,w:r.width*e,h:r.height*e}};if(t/e>=s/n){var i,o,c=n/e,u=t*c,f=a(c),d=s/2-f.y-f.h/2>=0,h=f.h>=s,_=u+s/2-f.y-f.h/2<s;return o=h?-f.y:d?0:_?s-u:s/2-f.y-f.h/2,{newWidth:n,newHeight:u,newX:0,newY:o}}var m=a(l/t),p=l/1.5,g=n/2-m.x-m.w/2>=0,v=p+n/2-m.x-m.w/2<n;return i=g?0:v?n-p:n/2-m.y-m.h/2,{newWidth:p,newHeight:l,newX:i,newY:0}},y=function(){var t=e.productPinImgColorTheme;return t&&(0,a.YM)(t).l>80?"black":"white"},b=function(e,t,n,r,a){i.beginPath(),i.moveTo(e+a,t),i.lineTo(e+n-a,t),i.quadraticCurveTo(e+n,t,e+n,t+a),i.lineTo(e+n,t+r-a),i.quadraticCurveTo(e+n,t+r,e+n-a,t+r),i.lineTo(e+a,t+r),i.quadraticCurveTo(e,t+r,e,t+r-a),i.lineTo(e,t+a),i.quadraticCurveTo(e,t,e+a,t),i.closePath(),i.stroke()},x=u({default_size:28,id:"1",key:"Produkt-Regular.otf",letter_spacing:-.2,line_height:1.25,name:"Cross-stitch",url:"https://s.pinimg.com/story_pins/fonts/Produkt-Regular.otf"}),P=u({default_size:28,id:"2",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"});c.onload=function(){var t=c.width,r=c.height;if(e.productPinImgBbox){var a=v(t,r,e.productPinImgBbox),o=a.newWidth,u=a.newHeight,f=a.newX,h=a.newY;i.drawImage(c,0,0,t,r,f,h,o,u),e.productPinImgColorTheme&&(i.fillStyle=e.productPinImgColorTheme),i.fillRect(0,s,n,l-s),null==x||x.then(function(){var e=.093*n,t=.0725*n,r=.093*n+t,a=.25*t;i.font="".concat(t,"px Cross-stitch"),i.fillStyle=y(),m("plain",i,n-2*e).forEach(function(n,o){return i.fillText(n,e,s+r+o*(t+a))})}),null==P||P.then(function(){var e=.093*n,t=1.26*n,r=.06*n,a=1.285*r,o=.57*r;i.font="".concat(r,"px Teaspoon"),i.fillStyle=y();var l=p(),s=i.measureText(l).width;i.fillText(l,e+a,t+o+r);var c=s+2*a,u=1.3*r+2*o;i.strokeStyle=y();var f=.033*c;b(e,t,c,u,f)}),d.onload=function(){var e=d.width,t=d.height,r=.093*n,a=.093*n,o=.148*n,s=o*e/t,c=n-r-s,u=l-a-o;i.drawImage(d,0,0,e,t,c,u,s,o)}}else{g(t,r),i.fillStyle="rgba(0, 0, 0, 0.5)",i.fillRect(0,0,n,l);var _="white";null==x||x.then(function(){var e=.12*n,t=.108*n,r=.414*n+t,a=.15*t;i.font="".concat(t,"px Cross-stitch"),i.fillStyle=_,m("theme",i,n-2*e).forEach(function(n,o){return i.fillText(n,e,r+o*(t+a))})}),null==P||P.then(function(){var e=.06*n,t=1.285*e,r=.57*e,a=e*p().length*.6+2*t,o=1.3*e+2*r,l=n/2-a/2,s=1.18*n;i.font="".concat(e,"px Teaspoon"),i.fillStyle=_,i.fillText(p(),l+t,s+r+e),i.strokeStyle=_;var c=.033*a;b(l,s,a,o,c)}),d.onload=function(){var e=d.width,t=d.height,r=.21*n,a=r*e/t,o=n/2-a/2,l=.125*n;i.drawImage(d,0,0,e,t,o,l,a,r)}}}},[l,n,s,f,e]),(0,c.jsx)("canvas",{ref:h,"data-test-id":"ad-template-canvas",height:l,width:n})})},581389:function(e,t,n){n.d(t,{YM:function(){return f},iF:function(){return h},lD:function(){return u}});var r,a,i=n(107366),o=n(444781),l=n(573810),s=n(325362);function c(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,a)}function u(e,t,n,r){for(var a=t.split(" "),i=[],o="",l="",s=0;s<a.length;s++){if(i.length>=r)return i;l.length>0&&(l+=" "),l+=a[s],e.measureText(l).width>n&&s>0?(i.push(o),l=o=a[s]):o=l}return o.length>0&&i.length<r&&i.push(o),i}function f(e){var t=0,n=0,r=0;4===e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):7===e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),t=Number(t);var a=Math.min(t/=255,n=Number(n)/255,r=Number(r)/255),i=Math.max(t,n,r),o=i-a,l=0,s=0,c=0;return(l=Math.round(60*(l=0===o?0:i===t?(n-r)/o%6:i===n?(r-t)/o+2:(t-n)/o+4)))<0&&(l+=360),c=(i+a)/2,{h:l,s:+(100*(0===o?0:o/(1-Math.abs(2*c-1)))).toFixed(1),l:c=+(100*c).toFixed(1)}}var d=function(e){var t=e.productPinImgBbox,n=e.link,r=e.productPinImgColorTheme,a=e.details,i=e.title,o=e.productPinImgUrl;(0,l.Nh)("productPinImgUrl",JSON.stringify(o)),(0,l.Nh)("productPinImgColorTheme",JSON.stringify(r)),t&&(0,l.Nh)("productPinImgBbox",JSON.stringify(t)),(0,l.Nh)("title",JSON.stringify(i)),(0,l.Nh)("details",JSON.stringify(a)),(0,l.Nh)("link",JSON.stringify(n))},h=(r=regeneratorRuntime.mark(function e(t){var n,r,a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pin,r=t.advertiserId,a="/ads/v4/advertisers/".concat(r,"/pins/").concat(n.id,"/ads_creative"),e.next=4,(0,i.Z)({url:a,method:"POST"});case 4:return(l=e.sent).resource_response.data&&d((0,o.Z)(s.Z)(l.resource_response.data)),e.abrupt("return",l);case 7:case"end":return e.stop()}},e)}),a=function(){var e=this,t=arguments;return new Promise(function(n,a){var i=r.apply(e,t);function o(e){c(i,n,a,o,l,"next",e)}function l(e){c(i,n,a,o,l,"throw",e)}o(void 0)})},function(e){return a.apply(this,arguments)})},763865:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var a,i;a=t,i=n[t],(a=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(a))in e?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{BN:function(){return l},RK:function(){return o},d3:function(){return c},xm:function(){return s}});var o=function(e){var t=e.alignment,n=e.verticalAlignment,r={alignItems:"flex-start",display:"flex",height:"100%",textAlign:"left",width:"100%"};return 1===n?r.alignItems="center":2===n&&(r.alignItems="flex-end"),1===t&&(r.textAlign="center"),r},l=function(e){var t=e.fontSize,n=e.hexColor,r=e.highlightColor;return i({fontSize:t,letterSpacing:e.letterSpacing,lineHeight:e.lineHeight,color:n,fontFamily:e.name,margin:0,textShadow:r||(null==n?void 0:n.toLowerCase())!=="#ffffff"?void 0:"0px 1px 4px rgba(0, 0, 0, 0.2)",width:"100%"},r?{backgroundColor:r,borderRadius:5,padding:".05em .2em"}:{})},s=function(e){var t=e.highlightColor;return i({},t?{backgroundColor:t,borderRadius:5,padding:".05em .2em"}:{})},c=function(e){var t=e.letterSpacing,n=e.lineHeight;return{fontFamily:e.name,fontGroup:"",fontOverrides:{letterSpacing:t,lineHeight:n,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:e.url}]}}},6845:function(e,t,n){n.d(t,{h:function(){return o},m:function(){return l}});var r=n(550910),a=n.n(r),i=n(763865);function o(e,t){if("undefined"==typeof window)return Promise.resolve(void 0);var n=document.querySelector("#".concat(t));if(n)return Promise.resolve(void 0);(n=document.createElement("style")).setAttribute("id",t),e.filter(function(e){return!!e.fontFaceUrl}).forEach(function(e){n&&e.fontFaceUrl&&n.appendChild(document.createTextNode("@import url('".concat(e.fontFaceUrl,"');")))});var r=document.head;if(!r)return Promise.resolve(void 0);var i=document.createElement("style");i.setAttribute("id","".concat(t,"-font-faces")),r.appendChild(n),r.appendChild(i);var o=[];return e.forEach(function(e){e&&e.styles&&e.styles.forEach(function(t){if(e.format&&t.fontUrl&&i&&i.sheet){var n;i.sheet.insertRule('\n            @font-face {\n              font-family: "'.concat(null!==(n=e.fontFamily)&&void 0!==n?n:"",'";\n              font-style: "').concat(t.fontStyle,'";\n              font-weight: "').concat(t.fontWeight,'";\n              src: url("').concat(t.fontUrl,'") format("').concat(e.format,'");\n            }'))}o.push(new(a())(e.fontFamily,{weight:t.fontWeight,style:t.fontStyle}).load())})}),Promise.all(o)}function l(e){var t=e||{},n=t.hasFont,r=t.letterSpacing,a=t.lineHeight,l=t.name,s=t.url;n&&o([(0,i.d3)({letterSpacing:r,lineHeight:a,name:l,url:s})],(null!=l?l:"").split(" ").join(""))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/81132-a8589170c290d05b.js.map