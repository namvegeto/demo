"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[31348],{131348:function(e,t,a){a.r(t),a.d(t,{VideoWrapper:function(){return W},default:function(){return U},getPlaylistSourceSrc:function(){return B}});var r=a(672652),o=a(86785),n=a(5859),i=a(214164),l=a(584452),s=a(369708),c=a(239821),u=a(684404),d=a(214877),p=a(406893),y=a(149722),f=a(813779),m=a(115557),b=a(734950),v=a(819267),P=["view","viewParameter","component","element","objectId"];function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach(function(t){w(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function g(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,a){return(t=O(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==E(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e){return e&&void 0!==e?"string"==typeof e?e:Array.isArray(e)&&e[0].src?e[0].src:"unsupported_type_".concat(E(e)):"undefined"}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(i,e);var t,a,o,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,a=D(i);if(t){var r=D(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return T(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return w(T(e=n.call.apply(n,[this].concat(a))),"state",{canPlayVideo:!1,playbackState:m.Cy.DEFAULT,videoStartTime:e.props.seekTime?e.props.seekTime:e.props.videoStartTime||0}),w(T(e),"errorRetryCount",2),w(T(e),"hasSegmentStarted",!1),w(T(e),"hasPlaybackStarted",!1),w(T(e),"hasVideoSessionStarted",!1),w(T(e),"hasVideoSessionEnded",!1),w(T(e),"lastStallTime",null),w(T(e),"lastPauseTime",null),w(T(e),"logSessionStartOnNextPlay",!1),w(T(e),"playerId",""),w(T(e),"videoSessionId",""),w(T(e),"videoVisibleTime",null),w(T(e),"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:C(e.props.src),totalStallDurationMs:0,totalPauseDurationMs:0,webBrowser:e.props.webBrowser,webBrowserVersion:e.props.webBrowserVersion}),w(T(e),"componentDidMount",function(){var t,a,r=e.props,o=r.contextLogData,n=r.playing,i=(void 0===o?{}:o).is_closeup_video,l=void 0!==i&&i;(0,f.tE)("videoMounted",!1,l),n&&(e.videoVisibleTime=new Date,e.logPlaybackPerformance(m.DR,{initiator:"mount"}));var s=null===(t=e.videoPlayerRef)||void 0===t?void 0:null===(a=t.video)||void 0===a?void 0:a.textTracks[0];s&&s.addEventListener("cuechange",function(){var e=s.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})}),w(T(e),"componentDidUpdate",function(t){var a,r,o=e.props,n=o.playing,i=o.visible,l=o.appInFocus,s=o.seekTime,c=o.captionsEnabled;s&&s!==t.seekTime&&e.setState({videoStartTime:s});var u=null===(a=e.videoPlayerRef)||void 0===a?void 0:null===(r=a.video)||void 0===r?void 0:r.textTracks[0];u&&(c?u.mode="showing":u.mode="disabled"),t.appInFocus&&!l&&(e.logPlaybackPerformance(m.$f,{initiator:"update"}),e.logSessionStartOnNextPlay=!0),t.visible&&!1===i&&(e.logSessionStartOnNextPlay=!1,e.updatePauseDuration(),e.logPlaybackPerformance(m.$f,{initiator:"update"})),!1===t.visible&&!0===i&&(e.videoVisibleTime=e.videoVisibleTime||new Date,n?(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(m.DR,{initiator:"update"})):e.logSessionStartOnNextPlay=!0),n&&l&&e.logSessionStartOnNextPlay&&(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(m.DR,{initiator:"update"}),e.logSessionStartOnNextPlay=!1)}),w(T(e),"addSegment",function(){var t=e.playbackPerformance,a=t.canPlayTime,r=t.loadStartTime,o=t.segments,n=t.srcString,i=-1;a&&r&&0===o.length&&(i=a>r?a-r:0);var l=e.videoPlayerRef&&e.videoPlayerRef.video,s={indicatedKbps:-1,duration:l&&l.duration*m.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:i,switchBitrateKbps:-1,uri:n,viewportWidth:l&&l.clientWidth||-1,viewportHeight:l&&l.clientHeight||-1,watchedDurationMs:0};o.push(s)}),w(T(e),"getCurrentVideoTime",function(){return e.videoPlayerRef&&e.videoPlayerRef.video?e.videoPlayerRef.video.currentTime*m.gJ:0}),w(T(e),"getVideoResourceTiming",function(){var t,a;if(null!==(t=window)&&void 0!==t&&null!==(a=t.performance)&&void 0!==a&&a.getEntriesByName&&e.playbackPerformance.srcString){var r=window.performance.getEntriesByName(e.playbackPerformance.srcString);return r.length>0&&r[0]||null}return null}),w(T(e),"handleCanPlayVideo",function(t){var a=e.props,r=a.contextLogData,o=a.onReady,n=a.playing,i=(void 0===r?{}:r).is_closeup_video,l=void 0!==i&&i,s=e.state.canPlayVideo;(0,f.tE)("handleCanPlayVideo",!1,l,{firstCanPlayEvent:!s,playing:n}),e.playbackPerformance.hasFatalError=!1,s||(e.playbackPerformance.canPlayTime=new Date),e.setState({canPlayVideo:!0}),o&&o(t)}),w(T(e),"handleEnded",function(t){var a=e.props,r=a.loop,o=a.onEnded,n=e.playbackPerformance.segments,i=n&&n[n.length-1];r&&e.videoPlayerRef&&e.videoPlayerRef.video?(e.updateWatchDurationForCurrentSegment(),i&&(i.lastStartPlayTime=0),e.hasSegmentStarted=!1):r||e.logPlaybackPerformance(m.$f,{initiator:"videoEnded",loop:r}),e.setState({playbackState:m.Cy.ENDED}),o&&o(t)}),w(T(e),"handleError",function(){var t,a,r,o,n,i,l,s,c=e.props.contextLogData,u=(void 0===c?{}:c).is_closeup_video,d=void 0!==u&&u,p=e.videoPlayerRef&&e.videoPlayerRef.video;(null==p?void 0:null===(t=p.error)||void 0===t?void 0:t.code)!==m.lG.MEDIA_ERR_ABORTED&&(e.playbackPerformance.hasFatalError=!0),e.playbackPerformance.detailedErrors+="".concat(e.playbackPerformance.detailedErrors.length>0?", ":"").concat((null==p?void 0:null===(a=p.error)||void 0===a?void 0:a.message)||""),e.playbackPerformance.errorCode=(null==p?void 0:null===(r=p.error)||void 0===r?void 0:r.code)||0,e.playbackPerformance.errorName=(null==p?void 0:null===(o=p.error)||void 0===o?void 0:null===(n=o.message)||void 0===n?void 0:n.slice(0,100))||"unknown",e.playbackPerformance.errorReason=(null==p?void 0:null===(i=p.error)||void 0===i?void 0:null===(l=i.message)||void 0===l?void 0:l.slice(0,100))||"unknown";var y={errorName:e.playbackPerformance.errorCode,errorReason:e.playbackPerformance.errorName,errorRetryCount:e.errorRetryCount,playbackState:e.state.playbackState,networkState:(null==p?void 0:p.networkState)||"unknown"};switch((0,f.tE)("fatalError",!1,d,y),null==p?void 0:null===(s=p.error)||void 0===s?void 0:s.code){case m.lG.MEDIA_ERR_ABORTED:break;case m.lG.MEDIA_ERR_NETWORK:case m.lG.MEDIA_ERR_DECODE:case m.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:e.errorRetryCount>0&&(null==p||p.load(),e.errorRetryCount-=1)}e.updateWatchDurationForCurrentSegment(),e.setState({playbackState:m.Cy.FAILED})}),w(T(e),"handleLoadedMetadata",function(){e.setState({playbackState:m.Cy.LOADED_METADATA})}),w(T(e),"handleLoadStart",function(){e.playbackPerformance.loadStartTime=new Date,e.setState({playbackState:m.Cy.LOAD_START})}),w(T(e),"handleLoadedData",function(){e.setState({playbackState:m.Cy.LOADED_DATA})}),w(T(e),"handlePlaying",function(t){e.playbackPerformance.hasFatalError=!1,e.setPlaybackStartTime(),e.hasSegmentStarted||e.addSegment(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.updateStallDuration(),e.updatePauseDuration(),e.setState({playbackState:m.Cy.PLAYING}),e.props.clearSeekTime&&e.props.clearSeekTime(),e.props.onPlaying&&e.props.onPlaying(t)}),w(T(e),"handleUserPause",function(t){var a=t.event,r=e.props.onControlsPause;e.lastPauseTime=new Date,r&&r({event:a})}),w(T(e),"handleVideoPause",function(){e.state.playbackState===m.Cy.STALLING||e.state.playbackState===m.Cy.SEEKING||(e.updateWatchDurationForCurrentSegment(),e.lastPauseTime||e.updateStallDuration()),e.setState({playbackState:m.Cy.PAUSED})}),w(T(e),"handleSeeking",function(){e.playbackPerformance.numberOfSeeks+=1;var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&(a.lastStartPlayTime=null),e.state.playbackState!==m.Cy.ENDED&&e.setState({playbackState:m.Cy.SEEKING})}),w(T(e),"handleStalled",function(){null===e.lastStallTime&&e.state.playbackState!==m.Cy.ENDED&&(e.lastStallTime=new Date,e.playbackPerformance.numberOfStalls+=1,e.setState({playbackState:m.Cy.STALLING}))}),w(T(e),"handleTimeUpdate",function(t){var a=e.props.onTimeChange;a&&a(t),e.state.playbackState===m.Cy.PLAYING&&(e.updateWatchDurationForCurrentSegment(),e.setLastSegmentStartPlayTime())}),w(T(e),"resetPlaybackMetrics",function(){e.hasSegmentStarted=!0,e.hasPlaybackStarted=!1,e.hasVideoSessionStarted=!1,e.hasVideoSessionEnded=!0,e.lastStallTime=null,e.lastPauseTime=null,e.videoSessionId="",e.videoVisibleTime=null,e.logSessionStartOnNextPlay=!1;var t=h(h({},e.playbackPerformance.segments[e.playbackPerformance.segments.length-1]),{},{lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0});e.playbackPerformance.detailedErrors="",e.playbackPerformance.errorCode=0,e.playbackPerformance.errorName="",e.playbackPerformance.errorReason="",e.playbackPerformance.hasFatalError=!1,e.playbackPerformance.numberOfStalls=0,e.playbackPerformance.numberOfSeeks=0,e.playbackPerformance.playbackStartTimestamp=null,e.playbackPerformance.totalStallDurationMs=0,e.playbackPerformance.segments=[t]}),w(T(e),"setLastSegmentStartPlayTime",function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.lastStartPlayTime&&(a.lastStartPlayTime=e.getCurrentVideoTime())}),w(T(e),"setLastSegmentPlaybackStartDate",function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.playbackStartDate&&(a.playbackStartDate=Date.now())}),w(T(e),"setPlaybackStartTime",function(){e.hasPlaybackStarted||(e.playbackPerformance.playbackStartTimestamp=Date.now(),e.hasPlaybackStarted=!0)}),w(T(e),"setVideoPlayerRef",function(t){var a=e.props.setVideoRef;if(t&&(a&&a(t),e.videoPlayerRef=t,e.videoPlayerRef.video)){var r=e.videoPlayerRef.video;r.addEventListener("loadedmetadata",e.handleLoadedMetadata),r.addEventListener("loadeddata",e.handleLoadedData),r.addEventListener("pause",e.handleVideoPause),r.readyState>=3&&(e.setState({canPlayVideo:!0}),e.playbackPerformance.canPlayTime=new Date)}}),w(T(e),"updateStallDuration",function(){if(null!==e.lastStallTime){var t=T(e).lastStallTime;e.playbackPerformance.totalStallDurationMs+=new Date-t,e.lastStallTime=null}}),w(T(e),"updatePauseDuration",function(){if(null!==e.lastPauseTime){var t=T(e).lastPauseTime;e.playbackPerformance.totalPauseDurationMs+=new Date-t,e.lastPauseTime=null}}),w(T(e),"updateWatchDurationForCurrentSegment",function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1],r=a?a.lastStartPlayTime:null,o=e.getCurrentVideoTime();if(a&&null!==r&&"number"==typeof o&&"number"==typeof r){var n=o-r;n>0&&(a.watchedDurationMs+=n,a.lastStartPlayTime=null)}}),w(T(e),"logPlaybackPerformance",function(t,a){var r=e.props,o=r.contextLogData,n=void 0===o?{}:o,i=r.userId,l=r.isAutoPlay,s=r.logContextEvent,c=r.preload,u=r.webBrowser,d=r.webBrowserVersion,p=n.is_closeup_video,y=void 0!==p&&p,b=e.playbackPerformance,v=b.canPlayTime,S=b.detailedErrors,g=b.errorCode,k=b.errorName,T=b.errorReason,D=b.hasFatalError,w=b.loadStartTime,O=b.totalPauseDurationMs,E=b.totalStallDurationMs,C=b.numberOfStalls,R=b.numberOfSeeks,_=b.playbackStartTimestamp,j=b.segments,V=b.srcString,L=e.videoPlayerRef&&e.videoPlayerRef.video,A=t===m.DR,I=A&&!e.hasVideoSessionStarted,x=!A&&!e.hasVideoSessionEnded&&e.hasVideoSessionStarted;if(L&&(I||x)){var M,N=-1;v&&w&&(N=v>w?v-w:0);var F=-1;v&&e.videoVisibleTime&&(F=v>e.videoVisibleTime?v-e.videoVisibleTime:0),A&&(e.videoSessionId=(0,m.Y7)(i),e.playerId=e.playerId||(0,m.EB)());var B=e.getVideoResourceTiming(),W={averageVideoKbps:-1,autoplaying:l,detailedErrors:S,downloadedKiloBytes:"number"==typeof(null==B?void 0:B.decodedBodySize)&&B.decodedBodySize/m.Fm||0,errorCode:g,errorName:k,errorReason:T,fatalError:D,isCellular:!1,nativeVideoDurationMs:L.duration*m.gJ||-1,numberOfStalls:C,numberOfSeeks:R,overallPausedDurationMs:O,overallBufferDurationMs:E,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:e.videoSessionId,playbackStartTimestamp:_||-1,segments:[],sessionMark:t,screenPixelScale:null!==(M=window)&&void 0!==M&&M.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:L.clientWidth,startupPlayerHeight:L.clientHeight,startupTimeMs:N,startupLatencyMs:F,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:L.videoWidth,startupVariantHeight:L.videoHeight,videoUrl:V,wasVideoPreloaded:"auto"===c};if(!A){e.updateWatchDurationForCurrentSegment(),e.updateStallDuration();var U=j.reduce(function(e,t){return e+(t.watchedDurationMs||0)},0);W.overallWatchedDurationMs=U,W.startupVariantWatchedDurationMs=U,W.segments=e.playbackPerformance.segments,0===U?(W.errorName="invalid_watch_duration",W.rebufferRate=-1):W.rebufferRate=E/U}(0,f.ZP)(W,!1,y,h({playbackState:e.state.playbackState},a)),s({event_type:3606,event_data:{videoPerformanceData:W},view_type:n.view,view_parameter:n.viewParameter,component:n.component,element:n.element,object_id_str:n.objectId,aux_data:h(h({},function(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}(n,P)),{},{is_closeup_video:y,playback_session_id:e.videoSessionId,web_browser:u,web_browser_version:d})}),A?(e.hasVideoSessionStarted=!0,e.hasVideoSessionEnded=!1):e.resetPlaybackMetrics(),(0,f.tE)(A?"sessionStart":"sessionEnd",!1,y,h({playbackState:e.state.playbackState},a))}}),e}return a=[{key:"componentWillUnmount",value:function(){var e=this.props.loop;this.updatePauseDuration(),this.logPlaybackPerformance(m.$f,{initiator:"unmount",loop:e})}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,a=e.captions,o=e.controls,n=e.loop,i=e.loopOverride,l=e.objectFit,s=e.onDurationChange,c=e.onFullscreenChange,d=e.onLoadedChange,y=e.onControlsPlay,f=e.onPlayheadDown,m=e.onPlayheadUp,P=e.onSeek,S=e.onVolumeChange,h=e.playbackRate,g=e.playing,k=e.playsInline,T=e.poster,D=e.preload,w=e.src,O=e.volume,E=this.state,R=E.canPlayVideo,_=E.videoStartTime;return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(p.Z,{unsafeCSS:b.P}),(0,v.jsx)(u.nk,{ref:this.setVideoPlayerRef,aspectRatio:t,autoplay:R&&g,captions:a,controls:o,loop:void 0===i?n:i,objectFit:l,onControlsPause:this.handleUserPause,onControlsPlay:y,onDurationChange:s,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:c,onLoadedChange:d,onLoadStart:this.handleLoadStart,onPlay:function(){},onPlayError:function(){},onPlayheadDown:f,onPlayheadUp:m,onPlaying:this.handlePlaying,onReady:this.handleCanPlayVideo,onSeek:P,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:S,onWaiting:this.handleStalled,playbackRate:h,playing:R&&g,playsInline:k,poster:T,preload:D,src:C(w),startTime:_||void 0,volume:O})]})}}],g(i.prototype,a),o&&g(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.Component),_=(0,r.memo)(function(e){var t=(0,d.v)().logContextEvent,a=(0,n.B)(),r=a.country,o=a.isAuthenticated,l=a.isBot,s=a.isSocialBot,u=a.unauthId,p=a.userAgent,m=p.browserName,b=p.browserVersion,P=p.isMobile,S=e.contextLogData,g=void 0===S?{}:S,k=g.is_closeup_video,T=g.view,D=g.viewParameter,w=(0,c.I)().appUI.appInFocus,O=(0,i.RC)().clearSeekTime,E=(0,y.Z)();return(0,f.r$)({browserName:m,browserVersion:b,country:r,isAuthenticated:o,isBot:l,is_closeup_video:void 0!==k&&k,isMobile:P,isSocialBot:s,view:T,viewParameter:D}),(0,v.jsx)(R,h(h({},e),{},{appInFocus:w,clearSeekTime:O,logContextEvent:t,userId:E.id||u,webBrowser:m,webBrowserVersion:b}))});function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach(function(t){N(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function A(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,a){return(t=F(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==j(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}var B=function(e){if(Array.isArray(e)){var t=e.find(function(e){return"video/m3u8"===e.type});return t?t.src:void 0}return/m3u8$/.test(e)?e:void 0},W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(i,e);var t,a,r,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,a=M(i);if(t){var r=M(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return x(e)}(this,e)});function i(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return N(x(e=n.call.apply(n,[this].concat(a))),"componentDidUpdate",function(t){var a;t.videoStartTime&&e.props.videoStartTime&&t.videoStartTime<e.props.videoStartTime&&null!==(a=e.videoPlayerRef)&&void 0!==a&&a.video&&(e.videoPlayerRef.video.currentTime=e.props.videoStartTime)}),N(x(e),"isHslVideo",function(){var t=B(e.props.src);return!e.props.preferMp4&&!(0,o.G6)(e.props.requestContext.userAgent.browserName)&&!!t}),N(x(e),"setVideoPlayerRef",function(t){t&&(e.videoPlayerRef=t)}),N(x(e),"handleOnEnded",function(t){var a=t.event,r=e.props,o=r.loop,n=r.onLoop,i=r.onEnded;i&&(i({event:a}),e.videoPlayerRef&&e.videoPlayerRef.video&&o&&(e.videoPlayerRef.video.play(),n&&n()))}),N(x(e),"handlePlaying",function(t){e.props.onPlaying&&e.props.onPlaying(t)}),e}return a=[{key:"render",value:function(){var e=this.props,t=e.aspectRatio,a=e.appInFocus,r=e.backgroundColor,o=e.captions,n=e.toggleCaptions,i=e.clearSeekTime,s=e.contextLogData,c=e.controls,u=e.hlsConfig,d=e.isAutoPlay,p=e.loop,y=e.objectFit,f=e.onDurationChange,m=e.onEnded,b=e.onFullscreenChange,P=e.onLoadedChange,S=e.onControlsPause,h=e.onControlsPlay,g=e.onPlayheadDown,k=e.onPlayheadUp,T=e.onReady,D=e.onSeek,w=e.onTimeChange,O=e.onVolumeChange,E=e.playbackRate,C=e.playing,R=e.playsInline,j=e.poster,V=e.preferMp4,A=e.preload,I=e.seekTime,x=e.src,M=e.videoStartTime,N=e.visible,F=e.volume,W=B(x),U=L(L({},u),{},{startPosition:M||-1}),G=!m&&p;return this.isHslVideo()&&W?(0,v.jsx)(l.Z,{appInFocus:a,aspectRatio:t,backgroundColor:r,captions:o,captionsEnabled:n,clearSeekTime:i,contextLogData:s,controls:c,hlsConfig:U,isAutoPlay:d,loop:p,loopOverride:G,objectFit:y,onControlsPause:S,onControlsPlay:h,onDurationChange:f,onEnded:this.handleOnEnded,onFullscreenChange:b,onLoadedChange:P,onPlay:function(){},onPlayError:function(){},onPlayheadDown:g,onPlayheadUp:k,onPlaying:this.handlePlaying,onReady:T,onSeek:D,onTimeChange:w,onVolumeChange:O,playbackRate:E,playing:C,playsInline:R,poster:j,preload:A,seekTime:I,setVideoRef:this.setVideoPlayerRef,src:W,visible:N,volume:F}):(0,v.jsx)(_,{aspectRatio:t,captions:o,captionsEnabled:n,clearSeekTime:i,contextLogData:s,controls:c,isAutoPlay:d,loop:p,loopOverride:G,objectFit:y,onControlsPause:S,onControlsPlay:h,onDurationChange:f,onEnded:this.handleOnEnded,onFullscreenChange:b,onLoadedChange:P,onPlay:function(){},onPlayError:function(){},onPlayheadDown:g,onPlayheadUp:k,onPlaying:this.handlePlaying,onReady:T,onSeek:D,onTimeChange:w,onVolumeChange:O,playbackRate:E,playing:C,playsInline:R,poster:j,preload:A,seekTime:I,setVideoRef:this.setVideoPlayerRef,src:V?x:W||x,videoStartTime:M,visible:N,volume:F})}}],A(i.prototype,a),r&&A(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.PureComponent);function U(e){var t=(0,c.I)().appUI.appInFocus,a=(0,i.Hx)().seekTime,r=(0,s.rG)().captionsEnabled,o=(0,i.RC)().clearSeekTime,l=(0,n.B)();return(0,v.jsx)(W,L(L({},e),{},{appInFocus:t,clearSeekTime:o,requestContext:l,seekTime:a,toggleCaptions:r}))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/31348-b23157fc6bce7d7a.js.map